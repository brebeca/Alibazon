


<div class="container  my-4" >
    <form  action="javascript:login();">
        <div class="form-group">
                <label for="exampleInputEmail1">Email address</label>
                <input type="email" class="form-control" id="Email" aria-describedby="emailHelp" placeholder="Enter email" name="email" required>
        </div>
            <div class="form-group">
                <label for="exampleInputPassword1">Password</label>
                <input type="password" class="form-control" id="Password" placeholder="Password" name="password" required>
            </div>
        <div class="form-group">
            <button  type="submit" class="btn btn-primary">Login</button>
           <p> Not registred? <a href="/auth/signUp" >Create an account</a></p>
        </div>
    </form>
</div>
<script>
    function login(){
        let email= document.getElementById("Email").value;
        let password= document.getElementById("Password").value;
        url='/auth/login';
        let xmlhttp = new XMLHttpRequest();

        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState === XMLHttpRequest.DONE) {
                let jsonObj = JSON.parse(xmlhttp.response);
                if (xmlhttp.status === 200) {
                    document.cookie="token="+jsonObj['token']+"; path=/";
                   // console.log(jsonObj);
                    //console.log(document.cookie);
                    window.location.replace("/");
                }
                else if(xmlhttp.status === 400){
                    alert('Login failed : '+ jsonObj['message']);
                }
                else
                    alert('Login failed : internal problem . ');
            }
        };
        xmlhttp.open("POST", url);
        xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xmlhttp.send(JSON.stringify({ "email": email,password: password}));
    }
</script>