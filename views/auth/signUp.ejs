


<div class="container  my-4" >
    <form  action="javascript:signUp();">
        <div class="form-group">
            <label for="exampleInputEmail1">Name </label>
            <input type="text" class="form-control" id="Name" aria-describedby="nameHelp" placeholder="Enter name" name="name" required>
        </div>
        <div class="form-group">
            <label for="exampleInputEmail1">Email address</label>
            <input type="email" class="form-control" id="Email" aria-describedby="emailHelp" placeholder="Enter email" name="email" required>
        </div>
        <div class="form-group">
            <label for="exampleInputPassword1">Password</label>
            <input type="password" class="form-control" id="Password" placeholder="Password" name="password" required>
        </div>
        <div class="form-group">
            <label for="exampleInputPassword1">Confirm password</label>
            <input type="password" class="form-control" id="PasswordMatching" placeholder="Password" name="password" required>
        </div>
        <div class="form-group">
            <button  type="submit" class="btn btn-primary">Login</button>
            <p> Do you have an account ? <a href="/auth/login" >SignIn</a></p>
        </div>
    </form>
</div>
<script>
    function signUp(){
        let email= document.getElementById("Email").value;
        let name= document.getElementById("Name").value;
        let password= document.getElementById("Password").value;
        let passwordMatch= document.getElementById("PasswordMatching").value;
        if(password!==passwordMatch)
            alert("Passwords do not match");
        else {
            url = '/auth/signUp';
            let xmlhttp = new XMLHttpRequest();

            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState === XMLHttpRequest.DONE) {
                    let jsonObj = JSON.parse(xmlhttp.response);
                    console.log(jsonObj);
                    if (xmlhttp.status === 200) {
                        //document.cookie = "token=" + jsonObj['token'] + "; path=/";
                        console.log(jsonObj);
                        //console.log(document.cookie);
                       // window.location.replace("/auth/login");
                    } else if (xmlhttp.status === 400) {
                        alert('Login failed : ' + jsonObj['message']);
                    } else
                        alert('Login failed : internal problem . ');
                }
            };
            xmlhttp.open("POST", url);
            xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xmlhttp.send(JSON.stringify({
                email: email,
                password: password,
                name: name,
            }));
        }
    }
</script>